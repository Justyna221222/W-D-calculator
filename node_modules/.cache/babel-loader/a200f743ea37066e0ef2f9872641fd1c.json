{"remainingRequest":"/home/justyna/Pulpit/Kalkulator1/node_modules/babel-loader/lib/index.js!/home/justyna/Pulpit/Kalkulator1/node_modules/eslint-loader/index.js??ref--13-0!/home/justyna/Pulpit/Kalkulator1/src/UseEmail.js","dependencies":[{"path":"/home/justyna/Pulpit/Kalkulator1/src/UseEmail.js","mtime":1660652948546},{"path":"/home/justyna/Pulpit/Kalkulator1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/justyna/Pulpit/Kalkulator1/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/justyna/Pulpit/Kalkulator1/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgeyByZWYgfSBmcm9tICd2dWUnOwoKdmFyIFVzZUVtYWlsID0gZnVuY3Rpb24gVXNlRW1haWwoZW5kcG9pbnRVcmwpIHsKICB2YXIgc3VtYm1pdHRlZCA9IHJlZihmYWxzZSk7CiAgdmFyIGxvYWRpbmcgPSByZWYoZmFsc2UpOwogIHZhciBlcnJvciA9IHJlZigpOwoKICBmdW5jdGlvbiBzZW5kRW1haWwoZGF0YSkgewogICAgbG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICBzdW1ibWl0dGVkLnZhbHVlID0gZmFsc2U7CiAgICBlcnJvci52YWx1ZSA9IHVuZGVmaW5lZDsKICAgIGZldGNoKGVuZHBvaW50VXJsLCB7CiAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQWNjZXB0OiAiYXBwbGljYXRpb24vanNvbiIsCiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIgogICAgICB9LAogICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKQogICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgLy8gRW5kcG9pbnQgdGhpbmtzIHRoYXQgaXQncyBsaWtlbHkgYSBzcGFtL2JvdCByZXF1ZXN0LCB5b3UgbmVlZCB0byBjaGFuZ2UgInNwYW0gcHJvdGVjdGlvbiBtb2RlIiB0byAibmV2ZXIiIGluIEhlcm9Ub2Z1IGZvcm1zCiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyMikgewogICAgICAgIHRocm93IG5ldyBFcnJvcigiQXJlIHlvdSByb2JvdD8iKTsKICAgICAgfQoKICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCIiLmNvbmNhdChyZXNwb25zZS5zdGF0dXNUZXh0LCAiICgiKS5jb25jYXQocmVzcG9uc2Uuc3RhdHVzLCAiKSIpKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBzdW1ibWl0dGVkLnZhbHVlID0gdHJ1ZTsKICAgICAgbG9hZGluZy52YWx1ZSA9IGZhbHNlOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICBlcnJvci52YWx1ZSA9IGVyci50b1N0cmluZygpOwogICAgICBsb2FkaW5nLnZhbHVlID0gZmFsc2U7CiAgICB9KTsKICB9CgogIHJldHVybiB7CiAgICBzdW1ibWl0dGVkOiBzdW1ibWl0dGVkLAogICAgbG9hZGluZzogbG9hZGluZywKICAgIGVycm9yOiBlcnJvciwKICAgIHNlbmRFbWFpbDogc2VuZEVtYWlsCiAgfTsKfTsKCmV4cG9ydCBkZWZhdWx0IFVzZUVtYWlsOw=="},{"version":3,"sources":["/home/justyna/Pulpit/Kalkulator1/src/UseEmail.js"],"names":["ref","UseEmail","endpointUrl","sumbmitted","loading","error","sendEmail","data","value","undefined","fetch","method","headers","Accept","body","JSON","stringify","then","response","status","Error","statusText","json","catch","err","toString"],"mappings":";;;AAAA,SAASA,GAAT,QAAoB,KAApB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,WAAD,EAAiB;AAChC,MAAMC,UAAU,GAAGH,GAAG,CAAC,KAAD,CAAtB;AACA,MAAMI,OAAO,GAAGJ,GAAG,CAAC,KAAD,CAAnB;AACA,MAAMK,KAAK,GAAGL,GAAG,EAAjB;;AAEA,WAASM,SAAT,CAAmBC,IAAnB,EAAyB;AACvBH,IAAAA,OAAO,CAACI,KAAR,GAAgB,IAAhB;AACAL,IAAAA,UAAU,CAACK,KAAX,GAAmB,KAAnB;AACAH,IAAAA,KAAK,CAACG,KAAN,GAAcC,SAAd;AAGAC,IAAAA,KAAK,CAACR,WAAD,EAAc;AACjBS,MAAAA,MAAM,EAAE,MADS;AAEjBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,MAAM,EAAE,kBADD;AAEP,wBAAgB;AAFT,OAFQ;AAMjBC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,IAAf;AANW,KAAd,CAAL,CAQGU,IARH,CAQQ,UAACC,QAAD,EAAc;AAClB;AACA,UAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,cAAM,IAAIC,KAAJ,CAAU,gBAAV,CAAN;AACD;;AAED,UAAIF,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,cAAM,IAAIC,KAAJ,WAAaF,QAAQ,CAACG,UAAtB,eAAqCH,QAAQ,CAACC,MAA9C,OAAN;AACD;;AAED,aAAOD,QAAQ,CAACI,IAAT,EAAP;AACD,KAnBH,EAoBGL,IApBH,CAoBQ,YAAM;AACVd,MAAAA,UAAU,CAACK,KAAX,GAAmB,IAAnB;AACAJ,MAAAA,OAAO,CAACI,KAAR,GAAgB,KAAhB;AACD,KAvBH,EAwBGe,KAxBH,CAwBS,UAACC,GAAD,EAAS;AACdnB,MAAAA,KAAK,CAACG,KAAN,GAAcgB,GAAG,CAACC,QAAJ,EAAd;AACArB,MAAAA,OAAO,CAACI,KAAR,GAAgB,KAAhB;AACD,KA3BH;AA6BD;;AAED,SAAO;AACLL,IAAAA,UAAU,EAAVA,UADK;AAELC,IAAAA,OAAO,EAAPA,OAFK;AAGLC,IAAAA,KAAK,EAALA,KAHK;AAILC,IAAAA,SAAS,EAATA;AAJK,GAAP;AAOD,CAjDD;;AAmDA,eAAeL,QAAf","sourcesContent":["import { ref } from 'vue'\n\nconst UseEmail = (endpointUrl) => {\n  const sumbmitted = ref(false);\n  const loading = ref(false);\n  const error = ref();\n\n  function sendEmail(data) {\n    loading.value = true;\n    sumbmitted.value = false;\n    error.value = undefined;\n\n\n    fetch(endpointUrl, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => {\n        // Endpoint thinks that it's likely a spam/bot request, you need to change \"spam protection mode\" to \"never\" in HeroTofu forms\n        if (response.status === 422) {\n          throw new Error(\"Are you robot?\");\n        }\n\n        if (response.status !== 200) {\n          throw new Error(`${response.statusText} (${response.status})`);\n        }\n\n        return response.json();\n      })\n      .then(() => {\n        sumbmitted.value = true;\n        loading.value = false;\n      })\n      .catch((err) => {\n        error.value = err.toString();\n        loading.value = false;\n      });\n\n  }\n\n  return {\n    sumbmitted,\n    loading,\n    error,\n    sendEmail\n  }\n\n}\n\nexport default UseEmail;"]}]}